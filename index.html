<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>السر الإلهي - مشغل فيديو متقدم</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<style>
body { font-family:'Arial', sans-serif; background:#f9f9f9; margin:0; padding:0; text-align:center; }
h1 { margin:20px 0; font-size:24px; }
.media-player { position:relative; width:90%; max-width:720px; margin:20px auto; background:#000; border-radius:10px; overflow:hidden; }
video { width:100%; display:block; border-radius:10px; }
.controls-overlay { position:absolute; bottom:0; left:0; width:100%; background:rgba(0,0,0,0.5); display:flex; flex-direction:column; padding:5px; box-sizing:border-box; }
.progress-bar { width:100%; height:5px; background:#555; cursor:pointer; margin-bottom:5px; border-radius:3px; position:relative; }
.progress-filled { height:100%; background:#00bcd4; width:0%; border-radius:3px; }
.controls-buttons { display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; }
.controls-buttons button { background:none; border:none; color:#fff; font-size:18px; cursor:pointer; margin:2px; display:flex; align-items:center; gap:5px; }
.controls-buttons button:hover { color:#00bcd4; }
</style>
</head>
<body>

<h1>السر الإلهي - بنت الإمام الحسين رقيّه</h1>

<div class="media-player">
    <video id="videoPlayer" src="video.mp4"></video>

    <div class="controls-overlay">
        <div class="progress-bar" id="progressBar">
            <div class="progress-filled" id="progressFilled"></div>
        </div>
        <div class="controls-buttons">
            <button id="prevBtn"><i class="fas fa-backward"></i></button>
            <button id="playPauseBtn"><i class="fas fa-play"></i></button>
            <button id="nextBtn"><i class="fas fa-forward"></i></button>
            <button id="repeatBtn"><i class="fas fa-retweet"></i></button>
            <button id="downloadBtn"><i class="fas fa-download"></i></button>
        </div>
    </div>
</div>

<script>
// الفيديوهات
const videoList = ["video.mp4", "video2.mp4", "video3.mp4"];
let currentIndex = 0;

// عناصر التحكم
const videoPlayer = document.getElementById('videoPlayer');
const playPauseBtn = document.getElementById('playPauseBtn');
const nextBtn = document.getElementById('nextBtn');
const prevBtn = document.getElementById('prevBtn');
const repeatBtn = document.getElementById('repeatBtn');
const downloadBtn = document.getElementById('downloadBtn');
const progressBar = document.getElementById('progressBar');
const progressFilled = document.getElementById('progressFilled');

// تحديث الفيديو الحالي
function loadVideo(index){
    videoPlayer.src = videoList[index];
    videoPlayer.load();
    updateButtons();
}

// تشغيل/إيقاف
playPauseBtn.addEventListener('click', ()=>{
    if(videoPlayer.paused) videoPlayer.play();
    else videoPlayer.pause();
    updatePlayPauseIcon();
});

function updatePlayPauseIcon(){
    playPauseBtn.innerHTML = videoPlayer.paused ? '<i class="fas fa-play"></i>' : '<i class="fas fa-pause"></i>';
}

// التالي
nextBtn.addEventListener('click', ()=>{
    if(currentIndex < videoList.length - 1){
        currentIndex++;
        loadVideo(currentIndex);
        videoPlayer.play();
        updatePlayPauseIcon();
    }
});

// السابق
prevBtn.addEventListener('click', ()=>{
    if(currentIndex > 0){
        currentIndex--;
        loadVideo(currentIndex);
        videoPlayer.play();
        updatePlayPauseIcon();
    }
});

// تكرار الفيديو
repeatBtn.addEventListener('click', ()=>{
    videoPlayer.currentTime = 0;
    videoPlayer.play();
    updatePlayPauseIcon();
});

// تحميل الفيديو
downloadBtn.addEventListener('click', ()=>{
    const link = document.createElement('a');
    link.href = videoList[currentIndex];
    link.download = videoList[currentIndex];
    link.click();
});

// تحديث الأزرار (إخفاء التالي/السابق عند الحد)
function updateButtons(){
    nextBtn.style.display = currentIndex >= videoList.length-1 ? 'none' : 'inline-flex';
    prevBtn.style.display = currentIndex <= 0 ? 'none' : 'inline-flex';
}

// شريط التقدم
videoPlayer.addEventListener('timeupdate', ()=>{
    const percent = (videoPlayer.currentTime / videoPlayer.duration) * 100;
    progressFilled.style.width = percent + '%';
});

// التقدم عند الضغط على الشريط
progressBar.addEventListener('click', (e)=>{
    const rect = progressBar.getBoundingClientRect();
    const clickX = e.clientX - rect.left;
    const width = rect.width;
    const newTime = (clickX / width) * videoPlayer.duration;
    videoPlayer.currentTime = newTime;
});

// عند انتهاء الفيديو، شغّل التالي تلقائي إذا موجود
videoPlayer.addEventListener('ended', ()=>{
    if(currentIndex < videoList.length - 1){
        currentIndex++;
        loadVideo(currentIndex);
        videoPlayer.play();
        updatePlayPauseIcon();
    } else {
        updatePlayPauseIcon();
    }
});

// التحميل عند بدء الصفحة
window.addEventListener('load', ()=>{
    loadVideo(currentIndex);
    updatePlayPauseIcon();
});
</script>

</body>
</html>
